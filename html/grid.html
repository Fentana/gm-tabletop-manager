<!doctype html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta charset="utf-8">
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
	<meta content="width=device-width, initial-scale=1" name="viewport">
	<meta content="Shapies Tabletop RPG Manager" name="description">
	<meta content="Almighty Nassar" name="author">
	<link rel="icon" href="favicon.ico">
	<title>Grid Converter</title>
	<!-- CSS SCRIPTS -->
	<link rel="stylesheet" type="text/css" href="../css/bootstrap.css" media="all">
	<link rel="stylesheet" type="text/css" href="../css/bootstrap-theme.css" media="all">
	<link rel="stylesheet" type="text/css" href="../css/fonts.css" media="all">
</head>
<body>
	<div class="container">
		<div class="row">
			<div id="Form" class="col-md-12" >
				<p>For a square, enter the length of a side. The system will calculate the diagonal length (Standard is a side length of 5 ft per square).</p>
				<p>For a Hexagon, enter the length of one edge, which is the same as the radius. The system will calculate the length between opposite edges (Standard is 3.5 miles radius/edge-length for an Edge-to-Edge width of 6 miles).</p>
				<p class="form-inline">
					1
				    <select id="type" class="form-control">
				    	<option value="square">square</option>
				    	<option value="hex">hex</option>
				    </select>
				    <b> = </b>
				    <input type="number" id="measure" class="form-control" value="5" />
				    <select id="unit" class="form-control">
				    	<option value="feet">feet</option>
				    	<option value="miles">miles</option>
				    	<option value="meters">meters</option>
				    	<option value="kilometers">kilometers</option>
				    </select>
				    <button onclick='calculate();' class="btn btn-primary">Calculate!</button>
				</p>
				<div id="Grid">
					<table class="table table-bordered table-condensed">
						<thead>
							<tr>
								<th>Squares</th>
								<th>Metric <span id='metric'></span></th>
								<th>Imperial <span id='imperial'></span></th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>1</td>
								<td id="metric_square"></td>
								<td id="imperial_square"></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
	<script src="../js/jquery.js"></script>
	<script>
	function calculate() {
		// Gets whether we are calculating squares or hexes, the units we are using, and the value we are using
		var square = $('#type').val();
		var unit = $('#unit').val();
		var measure = parseFloat($('#measure').val());
		// Store our metric and imperial values
		var metricVal = (unit === 'meters' || unit === 'kilometers') ? measure : ((unit === 'feet') ? f2m(measure, true) : m2k(measure, true));
		var imperialVal = (unit === 'feet' || unit === 'miles') ? measure : ((unit === 'meters') ? f2m(measure, false) : m2k(measure, false));
		// Calculate our diagonals or edge-to-edge
		var diag = (square === 'hex') ? 'Edge-to-Edge' : 'Diagonal';
		var metricDiag = (square === 'hex') ? edge(metricVal) : isoc(metricVal);
		var imperialDiag = (square === 'hex') ? edge(imperialVal) : isoc(imperialVal);
		// Write everything into our form
		$('#metric_square').html(metricVal + ' (' + diag + ' ' + metricDiag + ')');
		$('#imperial_square').html(imperialVal + ' (' + diag + ' ' + imperialDiag + ')');
		$('#metric').html('('+((unit === 'meters' || unit === 'kilometers') ? unit : ((unit === 'feet') ? 'meters' : 'kilometers'))+')');
		$('#imperial').html('('+((unit === 'miles' || unit === 'feet') ? unit : ((unit === 'meters') ? 'feet' : 'miles'))+')');
	}
	function f2m(measure,imperial) {
		var a = measure*10;
		if (imperial) {
			return (Math.round(a*0.3))/10;
		}
		return (Math.round(3.3*a))/10;
	}
	function m2k(measure,imperial) {
		if (imperial) {
			var a = measure*10;
			return (Math.round(a*1.6))/10;
		}
		var a = measure*10;
		return (Math.round(a*0.6))/10;
	}
	function isoc(a) {
		return Math.round(10*Math.sqrt(Math.pow(a,2)+Math.pow(a,2)))/10;
	}
	function edge(side) {
		return Math.round((side*Math.cos(Math.PI/6))*2);
	}
	</script>
</body>
</html>