<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
	<meta content="width=device-width, initial-scale=1" name="viewport">
	<meta content="Tabletop RPG Manager" name="description">
	<meta content="Almighty Nassar" name="author">
	<link rel="icon" href="favicon.ico">
	<title>Tabletop Manager</title>
	<!-- CSS SCRIPTS -->
	<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css" media="all">
	<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap-theme.css" media="all">
	<link rel="stylesheet" type="text/css" href="css/shapies.css" media="all">
</head>
<body>
    <div class="container">
    	<div class="row">
    		<div class="col-md-12"> 
	    		<ul class="nav nav-pills">
	    			<li><a href="index.html">Home</a>
	    			<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Tools<span class="caret"></span></a>
	    				<ul class="dropdown-menu">
			    			<li><a href="dice.html">Dice Roller</a></li>
			    			<li><a href="fictional.html">Fictional Text</a></li>
			    			<li><a href="item.html">Item List</a></li>
			    			<li><a href="markov.html">Markov Names</a></li>
			    			<li><a href="monster.html">Monster Creator</a></li>
			    			<li><a href="rumours.html">Rumours</a></li>
			    			<li><a href="stat.html">Stat Blocks</a></li>
			    			<li><a href="titles.html">Title for a Book/Tavern</a></li>
			    		</ul>
	    			</li>
	    			<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Databases <span class="caret"></span></a>
		    			<ul class="dropdown-menu">
			    			<li><a href="DB_item.html">Items</a></li>
			    			<li><a href="DB_markov.html">Names</a></li>
			    			<li><a href="DB_rumours.html">Rumours</a></li>
			    			<li><a href="DB_titles.html">Titles</a></li>
			    		</ul>
	    			</li>
	    			<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Misc<span class="caret"></span></a>
	    				<ul class="dropdown-menu">
			    			<li><a href="calculator.html">Monster CR Calculator</a></li>
			    			<li><a href="exportImport.html">Export/Import</a></li>
			    		</ul>
	    			</li>
	    		</ul>
	    	</div>
    	</div>
		<div class="row">
			<div class="col-md-12 well">
				<p><strong>Disclaimer:</strong> <em>This Monster Creator is inspired by D&amp;D 5th Edition, but should not be considered compatible with that edition. The terms used in the creator have come from the OGL content. The mechanics and assumptions used by this Creator do not follow the specifications provided in any published materials. Use this Creator at your own discretion, and please double check the final figures are compatible with your edition. Also, this is not meant for Player Character creation</em></p>
				<h4>Notes</h4>
				<ul>
					<li>Averages of a dice roll: 1d4 = 2.5; 1d6 = 3.5; 1d8 = 4.5; 1d10 = 5.5; 1d12 = 6.5; 1d20 = 10.5</li>
					<li>JavaScript is required to be enabled for the Creator to run adequately</li>
				</ul>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<div id="form" class="form">
					<div class="form-group">
						<label class="control-label">Name</label>
						<input type="text" name="name" id="formName" class="form-control">
					</div>
					<div class="form-group">
						<label class="control-label">Level</label>
						<input type="number" name="level" id="formLevel" value="0" class="form-control">
					</div>
					<div class="form-group">
						<label class="control-label">Type</label>
						<select id="formType" class="form-control"></select>
					</div>
					<div class="form-group">
						<label class="control-label">Size</label>
						<select id="formSize" class="form-control"></select>
					</div>
					<div class="form-group">
						<label class="control-label">Morals</label>
						<select id="formMoral" class="form-control"></select>
					</div>
					<div class="form-group">
						<label class="control-label">Ethics</label>
						<select id="formEthic" class="form-control"></select>
					</div>
					<div class="form-group">
						<label class="control-label">Armour Type</label>
						<select id="formArmour" class="form-control"></select>
					</div>
					<hr />
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-4 well">
				<p><label class="control-label">Speed</label></p>
				<div id="formSpeed"></div>
			</div>
			<div class="col-md-4">
				<p><label class="control-label">Senses</label></p>
				<div id="formSense"></div>
			</div>
			<div class="col-md-4 well">
				<p><label class="control-label">Bonus</label></p>
				<div id="formBonus"></div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-4">		
				<p><label class="control-label">Languages</label></p>
				<div id="formLang"></div>
			</div>
			<div class="col-md-4 well">	
				<p><label class="control-label">Skills</label></p>
				<div id="formSkill" class="form-group checkbox"></div>
			</div>
			<div class="col-md-4">	
				<p><label class="control-label">Tools</label></p>
				<div id="formTool"></div>
			</div>
		</div>		
		<div class="row">
			<div class="col-md-12">
				<label class="control-label">Attributes</label>
				<p><em>The following is the standard attribute array: 8,10,12,13,14,15</em></p>				
				<div id="form" class="form form-inline">
					<table class="table table-condensed">
						<thead>
							<tr>
								<th>Attribute</th>
								<th>Value</th>
								<th>Modifier</th>
								<th>Proficiency Roll (Attack/Skill)</th>
								<th>Magic Save DC</th>
							</tr>
						</thead>
						<tbody id="attributeTable">
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">	
				<div id="AttackForm" class="form form-inline">
					<h3>Actions</h3>
					<p><em>Use the Proficiency Attack Roll and the Magic Save DC in the attributes table as a guide to building your monster's particular action. This section is free-form to give you maximum control over your creature.</em></p>
					<p><strong>Type</strong> refers to the way this action is to be used. For instance, it can be "Attack", "Reaction", or "Trait"</p>
					<p>You will need to specifically click on the 'Add' button for the action to be added to the final monster</p>
					<p><a href='#' class='btn btn-primary hidden' id="addAttack">Add</a></p>
					<div class="form-group">
						<input type="text" id="trait_name_1" name="trait_name_1" class="form-control trait_name" placeholder="Type" />
						<input type="text" id="attack_name_1" name="attack_name_1" class="form-control attack_name" placeholder="Name" />
						<textarea rows="2" id="attack_detail_1" name="attack_detail_1" class="form-control attack_detail" placeholder="Details"></textarea>
						<a href="#" class="btn btn-danger removeInput hidden"> Remove</a>
					</div>
				</div>
				<hr />
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">	
				<h4>Adjustments</h4>
				<p><em>Your Offensive CR needs to be manually calculated since it is nearly impossible to create a system that will accept all forms of attack. Enter in the average Damage output for the first three rounds and the main attribute you used for the Attack Roll or Save DC.</em></p>
				<div id="form" class="form">
					<div class="form-group">
						<p class="control-label">Attack Type</p>
						<select id="attack_type" class="form-control" name="attack_type"></select>
					</div>
					<div class="form-group">
						<p class="control-label">Round 1 Damage</p>
						<input type="number" name="rnd_1_dmg" id="rnd_1_dmg" value="0" class="form-control">
					</div>
					<div class="form-group">
						<p class="control-label">Round 2 Damage</p>
						<input type="number" name="rnd_2_dmg" id="rnd_2_dmg" value="0" class="form-control">
					</div>
					<div class="form-group">
						<p class="control-label">Round 3 Damage</p>
						<input type="number" name="rnd_3_dmg" id="rnd_3_dmg" value="0" class="form-control">
					</div>
				</div>
				<hr />
			</div>
		</div>
		<div class="row">
			<div class="col-md-12 well">	
				<div class="form">
					<div class="form-group">
						<label class="control-label">Hit Points</label>
						<p id="hit_points"></p>
					</div>
					<div class="form-group">
						<label class="control-label">Armour Class</label>
						<p id="armour_class"></p>
					</div>
					<div class="form-group">
						<label class="control-label">Defensive CR</label>
						<p id="defence_cr">1/8</p>
					</div>
					<div class="form-group">
						<label class="control-label">Offensive CR</label>
						<p id="offence_cr"></p>
					</div>
					<div class="form-group ">
						<label class="control-label">CR</label>
						<p id="cr"></p>
					</div>
					<div class="form-group">
						<label class="control-label">Proficiency</label>
						<p id="final_prof"></p>
					</div>
				</div>
				<hr />
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">	
				<p><button class="btn btn-success" onclick='create();'>Submit</button></p>
				<hr />
			</div>
		</div>
		<div id="CanvasResult"></div>
	</div>
</body>
<script src="js/lib/jquery.js"></script>
<script src="bootstrap/js/bootstrap.js"></script>
<script src="js/lib/html2canvas.js"></script>
<script src="js/monster.js"></script>
<script>
	Monster.loadConfig();
	// The attack table
	// Prepare the attributes table
	var listAttribute = Monster.getAttributes();
	$('#attack_type').html('');
	for (var type in listAttribute) {
		$('#attack_type').append('<option value="'+type+'">'+type.toUpperCase()+'</option>');
		$('#attack_type').change(function() {
			generate();
		});
	}
	// Don't use random rolls
	Monster.setAverageRoll(true);
	// Function to generate the form
	function generate() {
		// Prepare the name and level
		$('#formName').val(Monster.getName());
		$('#formLevel').val(Monster.getLevel());
		// Prepare the Type dropdown
		var listType = Monster.listType();
		$('#formType').html('');
		for (var type in listType) {
			$('#formType').append('<option value="'+listType[type][0]+'" '+(listType[type][0] === Monster.getType()?"selected":"")+'>'+(listType[type][0]).toUpperCase()+'</option>');
		}
		// Prepare the Size dropdown
		var listSize = Monster.listSize();
		$('#formSize').html('');
		for (var type in listSize) {
			$('#formSize').append('<option value="'+listSize[type][0]+'" '+(listSize[type][0] === Monster.getSize()?"selected":"")+'>'+(listSize[type][0]).toUpperCase()+'</option>');
		}
		// Prepare the Moral dropdown
		var listMoral = Monster.listMoral();
		$('#formMoral').html('');
		for (var type in listMoral) {
			$('#formMoral').append('<option value="'+listMoral[type][0]+'" '+(listMoral[type][0] === Monster.getMoral()?"selected":"")+'>'+listMoral[type][0]+' - '+listMoral[type][1]+'</option>');
		}
		// Prepare the Moral dropdown
		var listEthic = Monster.listEthic();
		$('#formEthic').html('');
		for (var type in listEthic) {
			$('#formEthic').append('<option value="'+listEthic[type][0]+'" '+(listEthic[type][0] === Monster.getEthic()?"selected":"")+'>'+listEthic[type][0]+' - '+listEthic[type][1]+'</option>');
		}
		// Prepare the attributes table
		var listAttribute = Monster.getAttributes();
		$('#attributeTable').html('');
		for (var type in listAttribute) {
			$('#attributeTable').append('<tr><th>'+type+'</th><td><input type="number" name="'+type+'" id="attr_'+type+'" value="'+listAttribute[type]+'" class="form-control" /></td><td id="mod_'+type+'">'+Monster.getMod(type)+'</td><td id="attack_'+type+'">'+Monster.getAttack(type)+'</td><td id="save_'+type+'">'+Monster.getSave(type)+'</td></tr>');
			$('#attr_'+type).change(function() {
				Monster.setAttribute(this.name, $(this).val());
				generate();
			});
		}
		// Prepare the armour table
		var listArmour = Monster.listArmour();
		$('#formArmour').html('');
		for (var type in listArmour) {
			$('#formArmour').append('<option value="'+listArmour[type].name+'" '+(listArmour[type].name === Monster.getArmour()?"selected":"")+'>'+(listArmour[type].name.toUpperCase())+' - '+listArmour[type].description+'</option>');
		}
		// Prepare the speeds
		var listSpeed = Monster.getSpeed();
		$('#formSpeed').html('');
		for (var type in listSpeed) {
			$('#formSpeed').append('<div class="form-group"><p>'+type.toUpperCase()+'</p><input type="number" name="'+type+'" id="speed_'+type+'" value="'+listSpeed[type]+'" class="form-control"></div>');
			$('#speed_'+type).change(function() {
				Monster.setSpeed(this.name, $(this).val());
			});
		}
		// Prepare the senses
		var listSense = Monster.getSense();
		$('#formSense').html('');
		for (var type in listSense) {
			$('#formSense').append('<div class="form-group"><p>'+type.toUpperCase()+'</p><input type="number" name="'+type+'" id="sense_'+type+'" value="'+listSense[type]+'" class="form-control"></div>');
			$('#sense_'+type).change(function() {
				Monster.setSense(this.name, $(this).val());
			});
		}
		// Prepare the bonuses
		var listBonus = Monster.getBonus();
		$('#formBonus').html('');
		for (var type in listBonus) {
			$('#formBonus').append('<div class="form-group"><p>'+type.toUpperCase()+'</p><input type="number" name="'+type+'" id="bonus_'+type+'" value="'+listBonus[type]+'" class="form-control"></div>');
			$('#bonus_'+type).change(function() {
				Monster.setBonus(this.name, $(this).val());
				generate();
			});
		}
		// Prepare the skills
		var listSkill = Monster.getSkills();
		$('#formSkill').html('');
		for (var type in listSkill) {
			$('#formSkill').append('<div class="checkbox"><label><input type="checkbox" name="'+type+'" id="skill_'+type+'" '+(Monster.getSkillProf(type)?"checked":"")+'>'+type.toUpperCase()+'</label></div>');
			$('#skill_'+type).change(function() {
				Monster.setSkillProf(this.name, $(this).val());
			});
		}
		// Prepare the tools
		var listTool = Monster.getTools();
		$('#formTool').html('');
		for (var type in listTool) {
			$('#formTool').append('<div class="checkbox"><label><input type="checkbox" name="'+type+'" id="tool_'+type+'" '+(Monster.getToolProf(type)?"checked":"")+'>'+type.toUpperCase()+'</label></div>');
			$('#tool_'+type).change(function() {
				Monster.setToolProf(this.name, $(this).val());
			});
		}
		// Prepare the languages
		var listLang = Monster.getLang();
		$('#formLang').html('');
		for (var type in listLang) {
			$('#formLang').append('<div class="checkbox"><label><input type="checkbox" name="'+type+'" id="lang_'+type+'" '+(listLang[type]?"checked":"")+'>'+type.toUpperCase()+'</label></div>');
			$('#lang_'+type).change(function() {
				Monster.setLang(this.name, $(this).val());
			});
		}
		var attack_attrib = $('#attack_type').val();
		var average_damage = (parseInt($('#rnd_1_dmg').val(),0) + parseInt($('#rnd_2_dmg').val(),0) + parseInt($('#rnd_3_dmg').val(),0))/3;
		$('#hit_points').html(Monster.getHP());
		$('#armour_class').html(Monster.getAC());
		$('#defence_cr').html(Monster.getDCR());
		$('#offence_cr').html(Monster.getOCR(average_damage, attack_attrib));
		$('#cr').html(Monster.getCR(average_damage, attack_attrib));
		$('#final_prof').html(Monster.getProficiency());
	}
	generate();
	// Form variables
	$('#formName').change(function () { Monster.setName($(this).val()); });
	$('#formLevel').change(function () { Monster.setLevel($(this).val()); generate(); });
	$('#formMoral').change(function () { Monster.setMoral($(this).val()); });
	$('#formEthic').change(function () { Monster.setEthic($(this).val()); });
	$('#formSize').change(function () { Monster.setSize($(this).val()); generate(); });
	$('#formType').change(function () { Monster.setType($(this).val()); generate(); });
	$('#formArmour').change(function () { Monster.setArmour($(this).val()); generate(); });
	$('#rnd_1_dmg').change(function () { generate(); });
	$('#rnd_2_dmg').change(function () { generate(); });
	$('#rnd_3_dmg').change(function () { generate(); });
	/*
	// If Javascript is enabled, then remove our hidden option
	$('#addAttack, #addTrait, #addReaction, .removeInput').removeClass('hidden');
	// Add Attack form line
	$('#addAttack').on('click', function() {
	    var i = $('#AttackForm .form-group').size() + 1;
	    $('<div class="form-group">\
	       	<input id="attack_name_'+i+'" class="form-control attack_name" type="text" placeholder="Name" name="attack_name_'+i+'"> \
	    	<textarea id="attack_detail_'+i+'" class="form-control attack_detail" placeholder="Details" name="attack_detail_'+i+'"></textarea> \
	    	<a class="btn btn-danger removeInput" href="#"> Remove</a>').appendTo(attackDiv);
	    return false;
	});
	// When a remove button is clicked, delete the owning div and renumber everything
	$('#AttackForm').on('click', '.removeInput', function() { 
	    $(this).parent('.form-group').remove();
	    var i = 1;
	    $('#AttackForm .form-group .attack_name').each(function() {
	        this.id='attack_name_'+i;
	        this.name='attack_name_'+i;
	        i++;
	    });
	    var i = 1;
	    $('#AttackForm .form-group .attack_detail').each(function() {
	        this.id='attack_detail_'+i;
	        this.name='attack_detail_'+i;
	        i++;
	    });
	    return false;
	});
	*/
</script>
</html>
