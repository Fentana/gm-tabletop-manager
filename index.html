<!doctype html>
<html>
<head>
	<style>
[draggable] {
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  user-select: none;
  /* Required to make elements draggable in old WebKit */
  -khtml-user-drag: element;
  -webkit-user-drag: element;
}
	</style>
</head>
<body>
	<div id="DnD">
		<h2>BASICS</h2>
		<p><b>Level:</b> <span id="levels"></span></p>
		<p><b>Race:</b> <span id="races"></span></p>
		<p><b>Class:</b> <span id="classes"></span></p>
		<hr />
		<h2>ATTRIBUTES</h2>
		<p><b>Attribute Preferences (drag and drop):</b> <span id="prefs"></span></p>
		<p><b>Base Attributes</b></p>
		<table>
			<thead>
				<tr>
					<th>STR</th>
					<th>CON</th>
					<th>DEX</th>
					<th>INT</th>
					<th>WIS</th>
					<th>CHA</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td><span id="str"></span></td>
					<td><span id="con"></span></td>
					<td><span id="dex"></span></td>
					<td><span id="int"></span></td>
					<td><span id="wis"></span></td>
					<td><span id="cha"></span></td>
				</tr>
			</tbody>
		</table>
		<p><button onclick='rollArray();'>Roll Attributes</button><button onclick='standardArray();'>Standard Array</button></p>
		<hr />
		<h2>Equipment</h2>
		<p><b>Type:</b> <span id="armour_type">
			<select id="armour_input" name="armour_input">
				<option value="Cloth">Cloth (Light)</option>
				<option value="Leather">Leather (Light)</option>
				<option value="Hide">Hide (Light)</option>
				<option value="Chainmail">Chainmail</option>
				<option value="Scale">Scale armour</option>
				<option value="Plate">Plate armour</option>
			</select>
		</span></p>
		<p><button onclick='create();'>Submit</button><button onclick='PrintElem("character_card");'>Print</button></p>
		<hr />
		<div id="character_card">
			<h2 id="txt_character">Character Card</h2>
			<table border=1 >
				<tr>
					<th>HP</th>
					<th>Bloodied</th>
					<th>Surge Value</th>
					<th># Surges</th>
					<th>Initiative</th>
					<th>Speed</th>
					<th>Vision</th>
					<th>Size/Origin</th>
				</tr>
				<tr>
					<td id="txt_hp"></td>
					<td id="txt_blood"></td>
					<td id="txt_surge"></td>
					<td id="txt_spd"></td>
					<td id="txt_init"></td>
					<td id="txt_speed"></td>
					<td id="txt_vision"></td>
					<td id="txt_misc"></td>
				</tr>
				<tr>
					<th></th>
					<th>STR</th>
					<th>CON</th>
					<th>DEX</th>
					<th>INT</th>
					<th>WIS</th>
					<th>CHA</th>
					<th></th>
				</tr>
				<tr>
					<th>Score</th>
					<td id="txt_str"></td>
					<td id="txt_con"></td>
					<td id="txt_dex"></td>
					<td id="txt_int"></td>
					<td id="txt_wis"></td>
					<td id="txt_cha"></td>
					<td></td>
				</tr>
				<tr>
					<th>Mod</th>
					<td id="txt_str_mod"></td>
					<td id="txt_con_mod"></td>
					<td id="txt_dex_mod"></td>
					<td id="txt_int_mod"></td>
					<td id="txt_wis_mod"></td>
					<td id="txt_cha_mod"></td>
					<td></td>
				</tr>
				<tr>
					<th>Attack</th>
					<td id="txt_str_attack"></td>
					<td id="txt_con_attack"></td>
					<td id="txt_dex_attack"></td>
					<td id="txt_int_attack"></td>
					<td id="txt_wis_attack"></td>
					<td id="txt_cha_attack"></td>
					<td></td>
				</tr>
				<tr>
					<th>AC</th>
					<td id="txt_ac"></td>
					<th>FORT</th>
					<td id="txt_for"></td>
					<th>REF</th>
					<td id="txt_ref"></td>
					<th>WILL</th>
					<td id="txt_wil"></td>
				</tr>
				<tr>
					<td>Armour</td>
					<td id="txt_armour"></td>
				</tr>
			</table>
		</div>
		<br />
		<div id="shapies">
		    <canvas id="Shapies" style="border: 5px solid black;" width="100" height="100"></canvas>
		</div>
	</div>
</body>
<script src="Shapies.min.js"></script>
<script src="src/DnD.js"></script>
<script>
	// For our dice rolls
	var rollArray = (function () {
		// Generate our values and sort them
		var attributes = [DnD.dice.charAttribute(),
		                  DnD.dice.charAttribute(),
		                  DnD.dice.charAttribute(),
		                  DnD.dice.charAttribute(),
		                  DnD.dice.charAttribute(),
		                  DnD.dice.charAttribute()];
		attributes.sort(sortNumber);
		// Get our attribute preference and put the values as preferenced
		var prefs = window.document.getElementsByClassName('dnd_pref_input');
		window.document.getElementById(prefs[5].innerHTML.toLowerCase()+'_input').value = attributes[0];
		window.document.getElementById(prefs[4].innerHTML.toLowerCase()+'_input').value = attributes[1];
		window.document.getElementById(prefs[3].innerHTML.toLowerCase()+'_input').value = attributes[2];
		window.document.getElementById(prefs[2].innerHTML.toLowerCase()+'_input').value = attributes[3];
		window.document.getElementById(prefs[1].innerHTML.toLowerCase()+'_input').value = attributes[4];
		window.document.getElementById(prefs[0].innerHTML.toLowerCase()+'_input').value = attributes[5];
	});
	
	// Standard array
	var standardArray = (function () {
		// Generate our values and sort them
		var attributes = [10,11,12,13,14,16];
		attributes.sort(sortNumber);
		// Get our attribute preference and put the values as preferenced
		var prefs = window.document.getElementsByClassName('dnd_pref_input');
		window.document.getElementById(prefs[5].innerHTML.toLowerCase()+'_input').value = attributes[0];
		window.document.getElementById(prefs[4].innerHTML.toLowerCase()+'_input').value = attributes[1];
		window.document.getElementById(prefs[3].innerHTML.toLowerCase()+'_input').value = attributes[2];
		window.document.getElementById(prefs[2].innerHTML.toLowerCase()+'_input').value = attributes[3];
		window.document.getElementById(prefs[1].innerHTML.toLowerCase()+'_input').value = attributes[4];
		window.document.getElementById(prefs[0].innerHTML.toLowerCase()+'_input').value = attributes[5];
	});

    // Create the creature
    var create = (function () {
    	var creature = DnD.creature;
    	creature.setLevel(window.document.getElementById('level_input').value);
    	creature.setStr(window.document.getElementById('str_input').value);
    	creature.setCon(window.document.getElementById('con_input').value);
    	creature.setDex(window.document.getElementById('dex_input').value);
    	creature.setInt(window.document.getElementById('int_input').value);
    	creature.setWis(window.document.getElementById('wis_input').value);
    	creature.setCha(window.document.getElementById('cha_input').value);
    	creature.setRace(window.document.getElementById('race_input').value);
    	creature.setClass(window.document.getElementById('class_input').value);
    	//creature.addArmour(window.document.getElementById('armour_input').value);
    	                       
    	// Display our character
    	window.document.getElementById('txt_character').innerHTML = " - Level " + creature.getLevel() + " " + creature.getRaceName() + " " + creature.getClassName();
        window.document.getElementById('txt_str').innerHTML = creature.getStr();
        window.document.getElementById('txt_con').innerHTML = creature.getCon();
        window.document.getElementById('txt_dex').innerHTML = creature.getDex();
        window.document.getElementById('txt_int').innerHTML = creature.getInt();
        window.document.getElementById('txt_wis').innerHTML = creature.getWis();
        window.document.getElementById('txt_cha').innerHTML = creature.getCha();
        window.document.getElementById('txt_init').innerHTML = creature.getInitiative();
        window.document.getElementById('txt_speed').innerHTML = creature.getSpeed() + " squares";
        window.document.getElementById('txt_hp').innerHTML = creature.getHP();
        window.document.getElementById('txt_blood').innerHTML = creature.getBloodied();
        window.document.getElementById('txt_surge').innerHTML = creature.getSurge();
        window.document.getElementById('txt_spd').innerHTML = creature.getSurgePerDay();
        window.document.getElementById('txt_ac').innerHTML = creature.getAC();
        window.document.getElementById('txt_for').innerHTML = creature.getFort();
        window.document.getElementById('txt_ref').innerHTML = creature.getReflex();
        window.document.getElementById('txt_wil').innerHTML = creature.getWill();
        window.document.getElementById('txt_str_mod').innerHTML = creature.getStrMod();
        window.document.getElementById('txt_con_mod').innerHTML = creature.getConMod();
        window.document.getElementById('txt_dex_mod').innerHTML = creature.getDexMod();
        window.document.getElementById('txt_int_mod').innerHTML = creature.getIntMod();
        window.document.getElementById('txt_wis_mod').innerHTML = creature.getWisMod();
        window.document.getElementById('txt_cha_mod').innerHTML = creature.getChaMod();
        window.document.getElementById('txt_str_attack').innerHTML = creature.getStrAttack();
        window.document.getElementById('txt_con_attack').innerHTML = creature.getConAttack();
        window.document.getElementById('txt_dex_attack').innerHTML = creature.getDexAttack();
        window.document.getElementById('txt_int_attack').innerHTML = creature.getIntAttack();
        window.document.getElementById('txt_wis_attack').innerHTML = creature.getWisAttack();
        window.document.getElementById('txt_cha_attack').innerHTML = creature.getChaAttack();
        //window.document.getElementById('txt_armour').innerHTML = creature.armour.name;
        window.document.getElementById('txt_vision').innerHTML = creature.getRace().getVision();
        
        Shapies.canvas().start();
        var smilie1 = Shapies.actors.create('smilie');
        smilie1.radius = 50;
        smilie1.point = Shapies.canvas().midpoint();
        Shapies.canvas().addActor('smilie1', smilie1);
    });
</script>
</html>
